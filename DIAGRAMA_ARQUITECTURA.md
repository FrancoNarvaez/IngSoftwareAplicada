# ğŸ“ DIAGRAMA DE ARQUITECTURA - TechStore E-commerce

## Diagrama Completo del Sistema

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     ğŸŒ CLIENTE (BROWSER/MOBILE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  ğŸ¨ IONIC FRONTEND (PWA) - Puerto 4200                                     â”‚
â”‚                                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ COMPONENTES ANGULAR STANDALONE                                                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ Home Page (Productos Trending)        â”œâ”€ Cart Page (Carrito Local)                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ Products Page (CatÃ¡logo Filtrable)    â”œâ”€ Checkout (Formulario de Compra)                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ Login Page (JWT Auth)                 â”œâ”€ Order Tracking (Estado de Orden)                     â”‚  â”‚
â”‚  â”‚  â””â”€ Product Details (Info Detallada)      â””â”€ Profile (Datos del Cliente)                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                                             â”‚
â”‚  Stack:                                                                                                     â”‚
â”‚  â€¢ Angular 15+         (SPA Framework)      â€¢ RxJS 7+           (Reactive Programming)                    â”‚
â”‚  â€¢ TypeScript 5        (Lenguaje Tipado)   â€¢ NgRx 16+          (State Management)                        â”‚
â”‚  â€¢ Ionic 7             (UI Components)     â€¢ Service Workers   (Offline Support)                         â”‚
â”‚  â€¢ SCSS                (Estilos)           â€¢ Progressive WAP   (Installable App)                         â”‚
â”‚                                                                                                             â”‚
â”‚  Testing:                                                                                                   â”‚
â”‚  â€¢ Jasmine/Karma       (266 tests)         â€¢ Cypress           (E2E Testing)                             â”‚
â”‚  â€¢ ~85% Code Coverage                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ HTTP/REST (JSON)
                                            â”‚ {auth: JWT Token}
                                            â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              ğŸš€ CAPA DE API GATEWAY & ORQUESTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STORE SERVICE (API GATEWAY + MICROSERVICIO) - Puerto 8080                                 â”‚
â”‚                                                                                                              â”‚
â”‚  Java 21 + Spring Boot 3.4.5 + Spring WebFlux (Reactor) + Spring Security (OAuth2)                        â”‚
â”‚                                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ API ENDPOINTS (RESTful)                                                                            â”‚   â”‚
â”‚  â”‚                                                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ›’ COMMERCE                    ğŸ›µ GATEWAY ROUTES                  ğŸ” AUTH                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET  /api/products          â”œâ”€ /services/invoice/*   â”€â”€â–º Invoice Service   â”œâ”€ POST /auth    â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET  /api/product-orders    â”œâ”€ /services/notification/* â”€â”€â–º Notification   â”œâ”€ POST /refresh â”‚   â”‚
â”‚  â”‚  â”œâ”€ POST /api/product-orders    â””â”€ Consul Service Discovery      â””â”€ GET /account              â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET  /api/customers                                                                         â”‚   â”‚
â”‚  â”‚  â””â”€ GET  /api/product-categories                                                                 â”‚   â”‚
â”‚  â”‚                                                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“Š MONITORING                                                                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET /management/health                                                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET /management/info                                                                         â”‚   â”‚
â”‚  â”‚  â””â”€ GET /swagger-ui.html  (OpenAPI Documentation)                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                              â”‚
â”‚  Stack:                                                                                                      â”‚
â”‚  â€¢ Spring Boot 3.4.5   (Framework)          â€¢ R2DBC Reactor    (Non-blocking DB)                          â”‚
â”‚  â€¢ Spring WebFlux      (Reactive API)       â€¢ Logback          (Logging)                                  â”‚
â”‚  â€¢ Spring Security     (OAuth2 + JWT)       â€¢ Springdoc        (OpenAPI/Swagger)                          â”‚
â”‚  â€¢ Spring Data JPA     (ORM/Persistence)    â€¢ Logstash Encoder (JSON Logs)                               â”‚
â”‚                                                                                                              â”‚
â”‚  Testing:                                                                                                    â”‚
â”‚  â€¢ JUnit 5 + Mockito   (34 unit tests)      â€¢ TestContainers  (Integration Tests)                        â”‚
â”‚  â€¢ ArchUnit            (Architecture Tests)  â€¢ ~80% Code Coverage                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                        â”‚                                        â”‚
              â”‚                                        â”‚                                        â”‚
              â–¼                                        â–¼                                        â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    ğŸ”§ MICROSERVICIOS ESPECIALIZADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“„ INVOICE SERVICE (Puerto 8081)       â”‚   â”‚  ğŸ”” NOTIFICATION SERVICE (Puerto 8082)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚   â”‚                                          â”‚
â”‚ Responsabilidades:                       â”‚   â”‚ Responsabilidades:                       â”‚
â”‚ âœ“ GeneraciÃ³n de Facturas                â”‚   â”‚ âœ“ Notificaciones (Email/SMS)            â”‚
â”‚ âœ“ Registro de EnvÃ­os (Shipments)        â”‚   â”‚ âœ“ Event Listener de Order Created       â”‚
â”‚ âœ“ Persistencia de Datos Fiscales        â”‚   â”‚ âœ“ Almacenamiento en NoSQL              â”‚
â”‚ âœ“ API de Consulta de Invoices           â”‚   â”‚ âœ“ Procesamiento AsÃ­ncrono               â”‚
â”‚                                          â”‚   â”‚                                          â”‚
â”‚ Stack:                                   â”‚   â”‚ Stack:                                   â”‚
â”‚ â€¢ Spring Boot 3.4.5                     â”‚   â”‚ â€¢ Spring Boot 3.4.5                     â”‚
â”‚ â€¢ Java 21                               â”‚   â”‚ â€¢ Java 21                               â”‚
â”‚ â€¢ MySQL (R2DBC - Reactor)               â”‚   â”‚ â€¢ MongoDB 7.0 (Reactive Driver)         â”‚
â”‚ â€¢ Spring WebFlux                        â”‚   â”‚ â€¢ Spring WebFlux                        â”‚
â”‚ â€¢ WebClient (Async HTTP)                â”‚   â”‚ â€¢ Project Reactor                       â”‚
â”‚ â€¢ Logstash Encoder                      â”‚   â”‚ â€¢ Spring Cloud Bus (Event Hub)          â”‚
â”‚                                          â”‚   â”‚ â€¢ Logstash Encoder                      â”‚
â”‚ Tests: 28 tests âœ…                       â”‚   â”‚ Tests: 24 tests âœ…                       â”‚
â”‚                                          â”‚   â”‚                                          â”‚
â”‚ DB: MySQL 8.0 (invoicedb)               â”‚   â”‚ DB: MongoDB (notificationdb)            â”‚
â”‚ Tables:                                  â”‚   â”‚ Collections:                             â”‚
â”‚ â”œâ”€ invoices                             â”‚   â”‚ â”œâ”€ notifications                        â”‚
â”‚ â”œâ”€ shipments                            â”‚   â”‚ â”œâ”€ notification_events                  â”‚
â”‚ â””â”€ invoice_items                        â”‚   â”‚ â””â”€ notification_history                 â”‚
â”‚                                          â”‚   â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                          â”‚
                                          â”‚ Service Discovery (Consul)
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ” CONSUL SERVICE DISCOVERY - Puerto 8500                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                        â”‚
â”‚ Funciones:                                                                            â”‚
â”‚ âœ“ Registro automÃ¡tico de servicios        âœ“ Health Checks (cada 10 segundos)         â”‚
â”‚ âœ“ Service-to-Service Discovery            âœ“ Configuration Management                 â”‚
â”‚ âœ“ Load Balancing bÃ¡sico                   âœ“ DNS Interface                            â”‚
â”‚                                                                                        â”‚
â”‚ Servicios Registrados:                                                               â”‚
â”‚ â”œâ”€ store              (8080)    â””â”€ Health: âœ… UP                                     â”‚
â”‚ â”œâ”€ invoice            (8081)    â””â”€ Health: âœ… UP                                     â”‚
â”‚ â””â”€ notification       (8082)    â””â”€ Health: âœ… UP                                     â”‚
â”‚                                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚
                                          â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            ğŸ’¾ CAPA DE PERSISTENCIA Y ALMACENAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ—„ï¸ MySQL 8.0 (Relacional)                â”‚   â”‚  ğŸ“¦ MongoDB 7.0 (NoSQL)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚   â”‚                                          â”‚
â”‚ Puerto: 3306                                â”‚   â”‚ Puerto: 27017                            â”‚
â”‚                                              â”‚   â”‚                                          â”‚
â”‚ STORE DATABASE (store.jar)                  â”‚   â”‚ NOTIFICATION DATABASE (notification)     â”‚
â”‚ â”œâ”€ products                                 â”‚   â”‚ â”œâ”€ notifications                        â”‚
â”‚ â”œâ”€ product_categories                       â”‚   â”‚ â”œâ”€ notification_events                  â”‚
â”‚ â”œâ”€ product_orders                           â”‚   â”‚ â””â”€ notification_preferences             â”‚
â”‚ â”œâ”€ order_items                              â”‚   â”‚                                          â”‚
â”‚ â”œâ”€ customers                                â”‚   â”‚ Characteristics:                         â”‚
â”‚ â””â”€ jhi_authority (Roles)                    â”‚   â”‚ âœ“ Flexible Schema                       â”‚
â”‚                                              â”‚   â”‚ âœ“ Document-oriented                    â”‚
â”‚ INVOICE DATABASE (invoice.jar)              â”‚   â”‚ âœ“ Replication Support                  â”‚
â”‚ â”œâ”€ invoices                                 â”‚   â”‚ âœ“ Horizontal Scaling                   â”‚
â”‚ â”œâ”€ shipments                                â”‚   â”‚                                          â”‚
â”‚ â””â”€ invoice_items                            â”‚   â”‚ Driver: Spring Data Reactive MongoDB    â”‚
â”‚                                              â”‚   â”‚                                          â”‚
â”‚ Features:                                   â”‚   â”‚ Connection: R2DBC Adapter               â”‚
â”‚ âœ“ ACID Transactions                         â”‚   â”‚                                          â”‚
â”‚ âœ“ Relational Integrity                      â”‚   â”‚                                          â”‚
â”‚ âœ“ Normalization                             â”‚   â”‚                                          â”‚
â”‚ âœ“ Full-text Search Support                  â”‚   â”‚                                          â”‚
â”‚                                              â”‚   â”‚                                          â”‚
â”‚ Driver: R2DBC Reactor (Non-blocking)       â”‚   â”‚                                          â”‚
â”‚                                              â”‚   â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚
                                          â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         ğŸ“Š OBSERVABILIDAD CENTRALIZADA - ELK STACK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          FLUJO DE LOGS                                                   â”‚
â”‚                                                                                                          â”‚
â”‚  APLICACIONES                                                                                           â”‚
â”‚  (Store, Invoice,                  JSON                          ANÃLISIS &                             â”‚
â”‚   Notification)        â”€â”€â–º  Logstash  â”€â”€â–º  Elasticsearch  â”€â”€â–º  VISUALIZACIÃ“N  â”€â”€â–º  KIBANA              â”‚
â”‚                         5044 (TCP)         9200 (Storage)       5601 (UI)        Dashboard              â”‚
â”‚                                                                                                          â”‚
â”‚  Logback + Logstash                    Ãndices Diarios          Queries &                               â”‚
â”‚  Encoder (JSON Format)                 app-logs-YYYY.MM.dd      Agregaciones                           â”‚
â”‚                                                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                          â”‚
â”‚  ğŸ“¨ LOGSTASH (Agregador de Logs)                                                                       â”‚
â”‚  â”œâ”€ Puerto: 5044 (TCP Input)                                                                           â”‚
â”‚  â”œâ”€ CÃ³digo JSON -> Parser -> Enriccer -> Output                                                        â”‚
â”‚  â”œâ”€ Agrega campos: @timestamp, service, level, logger, thread, message                                â”‚
â”‚  â””â”€ Output: Elasticsearch con Ã­ndice diario                                                            â”‚
â”‚                                                                                                          â”‚
â”‚  ğŸ” ELASTICSEARCH (BÃºsqueda y AnÃ¡lisis)                                                               â”‚
â”‚  â”œâ”€ Puerto: 9200 (REST API)                                                                           â”‚
â”‚  â”œâ”€ Ãndices: app-logs-2025.12.09, app-logs-2025.12.10, etc.                                          â”‚
â”‚  â”œâ”€ Shards: 3 (Distributed)                                                                            â”‚
â”‚  â”œâ”€ Replicas: 1 (Redundancy)                                                                           â”‚
â”‚  â””â”€ RetenciÃ³n: Configurable (por defecto 30 dÃ­as)                                                     â”‚
â”‚                                                                                                          â”‚
â”‚  ğŸ“º KIBANA (VisualizaciÃ³n)                                                                              â”‚
â”‚  â”œâ”€ Puerto: 5601 (Web Interface)                                                                       â”‚
â”‚  â”œâ”€ Dashboard: Real-time Monitoring                                                                    â”‚
â”‚  â”œâ”€ Discover: ExploraciÃ³n de logs                                                                      â”‚
â”‚  â”œâ”€ Alerting: Notificaciones automÃ¡ticas                                                               â”‚
â”‚  â””â”€ Analytics: AnÃ¡lisis de patrones                                                                    â”‚
â”‚                                                                                                          â”‚
â”‚  Logs Registrados:                                                                                      â”‚
â”‚  â€¢ Application Startup/Shutdown                                                                        â”‚
â”‚  â€¢ HTTP Requests/Responses                                                                             â”‚
â”‚  â€¢ Database Operations                                                                                  â”‚
â”‚  â€¢ Authentication Events                                                                                â”‚
â”‚  â€¢ Business Logic Execution                                                                            â”‚
â”‚  â€¢ Errors and Exceptions                                                                               â”‚
â”‚  â€¢ Performance Metrics                                                                                  â”‚
â”‚                                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Diagrama de Flujo: Proceso de Compra Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO EN FRONTEND                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  1ï¸âƒ£ CARGAR CATÃLOGO                          â”‚
                    â”‚  GET /api/products?category=smartphones       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Store Service                                 â”‚
                    â”‚ â”œâ”€ Valida JWT token                          â”‚
                    â”‚ â”œâ”€ Consulta MySQL productos                 â”‚
                    â”‚ â””â”€ Retorna lista con precios & stock         â”‚
                    â”‚ (Logs: âœ… Stored in Elasticsearch)           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Frontend (Ionic)                              â”‚
                    â”‚ â”œâ”€ Renderiza productos                       â”‚
                    â”‚ â””â”€ Estado local con RxJS Subjects            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  2ï¸âƒ£ USUARIO AGREGA AL CARRITO                â”‚
                    â”‚  AcciÃ³n: addToCart({product, quantity})      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Frontend (Ionic)                              â”‚
                    â”‚ â”œâ”€ Actualiza NgRx Store (State)              â”‚
                    â”‚ â””â”€ Guarda en localStorage (persistencia)      â”‚
                    â”‚ (NO envÃ­a al servidor aÃºn)                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  3ï¸âƒ£ USUARIO VA A CHECKOUT                    â”‚
                    â”‚  POST /api/product-orders                    â”‚
                    â”‚  Body: {customer, items[], totals}            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Store Service                                 â”‚
                    â”‚ â”œâ”€ Valida datos de orden                     â”‚
                    â”‚ â”œâ”€ Verifica stock en MySQL                   â”‚
                    â”‚ â”œâ”€ Crea ProductOrder (id=12345)              â”‚
                    â”‚ â”œâ”€ Crea OrderItems para cada lÃ­nea           â”‚
                    â”‚ â”œâ”€ Emite evento: OrderCreatedEvent           â”‚
                    â”‚ â””â”€ Persiste en MySQL (transactional)         â”‚
                    â”‚ (Logs: âœ… ORDER_CREATED en ES)               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                               â”‚
                    â–¼                                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  4ï¸âƒ£ GENERAR FACTURA       â”‚              â”‚  5ï¸âƒ£ ENVIAR NOTIFICACIÃ“N â”‚
        â”‚  Invoice Service          â”‚              â”‚  Notification Service     â”‚
        â”‚                           â”‚              â”‚                           â”‚
        â”‚ GET EVENT: OrderCreated   â”‚              â”‚ GET EVENT: OrderCreated   â”‚
        â”‚                           â”‚              â”‚                           â”‚
        â”‚ â”œâ”€ Consulta Order (#12345)               â”‚ â”œâ”€ Obtiene datos orden    â”‚
        â”‚ â”œâ”€ Calcula impuestos      â”‚              â”‚ â”œâ”€ Prepara email          â”‚
        â”‚ â”œâ”€ Crea Invoice en MySQL  â”‚              â”‚ â”œâ”€ EnvÃ­a a email cliente â”‚
        â”‚ â”œâ”€ SET estado=EMITTED     â”‚              â”‚ â”œâ”€ Guarda en MongoDB      â”‚
        â”‚ â””â”€ Retorna Invoice JSON   â”‚              â”‚ â””â”€ Emoji notificaciÃ³n     â”‚
        â”‚ (Logs: âœ… EN Elasticsearch)              â”‚ (Logs: âœ… EN Elasticsearch)
        â”‚                           â”‚              â”‚                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  6ï¸âƒ£ ACTUALIZAR FRONTEND                      â”‚
                    â”‚  Frontend obtiene estado:                     â”‚
                    â”‚  â”œâ”€ Order ID: 12345                          â”‚
                    â”‚  â”œâ”€ Status: CONFIRMED                        â”‚
                    â”‚  â”œâ”€ Total: $2,500.00                         â”‚
                    â”‚  â”œâ”€ Invoice: #INV-2025-00543                 â”‚
                    â”‚  â””â”€ Tracking: En preparaciÃ³n                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  7ï¸âƒ£ MONITOREO EN KIBANA                       â”‚
                    â”‚  Abrir: http://localhost:5601                â”‚
                    â”‚  Dashboard muestra:                           â”‚
                    â”‚  â”œâ”€ Ã“rdenes procesadas: 1,245               â”‚
                    â”‚  â”œâ”€ Tiempo promedio: 523ms                  â”‚
                    â”‚  â”œâ”€ Errores: 0                              â”‚
                    â”‚  â”œâ”€ Logs filtrados por servicio             â”‚
                    â”‚  â””â”€ Timeline de eventos                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ TopologÃ­a de Red (Docker Compose)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DOCKER BRIDGE NETWORK                             â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚ store:8080   â”‚  â”‚ invoice:8081 â”‚  â”‚ notification:8082       â”‚â”‚â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚                         â”‚â”‚â”‚
â”‚  â”‚  â”‚ Spring Boot  â”‚  â”‚ Spring Boot  â”‚  â”‚ Spring Boot            â”‚â”‚â”‚
â”‚  â”‚  â”‚ (Java 21)    â”‚  â”‚ (Java 21)    â”‚  â”‚ (Java 21)              â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚         â”‚                 â”‚                     â”‚                  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚                           â”‚                                         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚             Consul Service Discovery :8500                   â”‚â”‚â”‚
â”‚  â”‚  â”‚ Registro de servicios & Health checks                        â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚         â”‚          â”‚              â”‚                              â”‚
â”‚  â”‚         â–¼          â–¼              â–¼                              â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    â”‚MySQL:  â”‚ â”‚MongoDB: â”‚  â”‚Elastic:  â”‚  â”‚Logstash: Kibana:â”‚ â”‚
â”‚  â”‚    â”‚3306    â”‚ â”‚27017    â”‚  â”‚9200      â”‚  â”‚5044      5601    â”‚ â”‚
â”‚  â”‚    â”‚        â”‚ â”‚         â”‚  â”‚          â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚    â”‚store   â”‚ â”‚notifc   â”‚  â”‚app-logs  â”‚  â”‚Log Pipeline      â”‚ â”‚
â”‚  â”‚    â”‚invoice â”‚ â”‚db       â”‚  â”‚-*        â”‚  â”‚& Dashboard       â”‚ â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Componentes Detallados

### Frontend Stack
- **Angular 15+**: Framework SPA reactivo
- **TypeScript 5**: Lenguaje con tipos estÃ¡ticos
- **RxJS 7**: ProgramaciÃ³n reactiva con Observables
- **NgRx**: GestiÃ³n de estado centralizada (Redux pattern)
- **Ionic 7**: Componentes UI optimizados para mobile
- **Service Workers**: Offline support y caching
- **Reactive Forms**: ValidaciÃ³n avanzada de formularios

### Backend Stack por Servicio
- **Java 21**: Lenguaje principal (Virtual Threads)
- **Spring Boot 3.4.5**: Framework web reactivo
- **Spring WebFlux**: API no-bloqueante con Reactor
- **Spring Security**: AutenticaciÃ³n OAuth2 + JWT
- **R2DBC**: Reactive Database Connectivity
- **Logback**: Logging framework
- **Logstash Encoder**: SerializaciÃ³n JSON de logs

### Database Stack
- **MySQL 8.0**: Transacciones ACID, normalizadas
- **MongoDB 7.0**: Documentos flexibles, escalable
- **Elasticsearch 8.15.3**: BÃºsqueda distribuida

### Observability Stack
- **Logstash 8.15.3**: Log aggregation & enrichment
- **Kibana 8.15.3**: Data visualization & analytics
- **ELK**: PatrÃ³n completo de observabilidad

### DevOps Stack
- **Docker**: ContainerizaciÃ³n
- **Docker Compose**: Local orchestration
- **Consul**: Service discovery

---

## ğŸš€ Sequence Diagram: Compra de Producto

```
Frontend              Store Service        Invoice Service     Notification Service    Elasticsearch
   â”‚                      â”‚                     â”‚                     â”‚                   â”‚
   â”‚ GET /api/products    â”‚                     â”‚                     â”‚                   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚                     â”‚                   â”‚
   â”‚                      â”‚ SELECT * FROM       â”‚                     â”‚                   â”‚
   â”‚                      â”‚ products            â”‚                     â”‚                   â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚ [Products List]      â”‚                     â”‚                     â”‚                   â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚                   â”‚
   â”‚                      â”‚                     â”‚                     â”‚                   â”‚
   â”‚ POST /api/product-orders                   â”‚                     â”‚                   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚                     â”‚                   â”‚
   â”‚ {items, total}       â”‚ INSERT ORDER        â”‚                     â”‚                   â”‚
   â”‚                      â”‚ INSERT ORDER_ITEMS  â”‚                     â”‚                   â”‚
   â”‚                      â”‚ EMIT: OrderCreated  â”‚                     â”‚                   â”‚
   â”‚                      â”‚                     â”‚                     â”‚                   â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                      â”‚                     â”‚ [LOG] OrderCreatedEvent
   â”‚                      â”‚                     â”‚                     â”‚
   â”‚                      â”‚                     â”‚ GET Order(12345)    â”‚
   â”‚                      â”‚                     â”‚ CREATE Invoice      â”‚                   â”‚
   â”‚                      â”‚                     â”‚                     â”‚                   â”‚
   â”‚                      â”‚                     â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                      â”‚                     â”‚                     â”‚ [LOG] Notific. Sent
   â”‚                      â”‚                     â”‚                     â”‚ SEND EMAIL
   â”‚                      â”‚                     â”‚                     â”‚
   â”‚ [Order Confirmed]    â”‚                     â”‚                     â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚                   â”‚
   â”‚                      â”‚                     â”‚                     â”‚                   â”‚
```

---

## ğŸ’¡ CaracterÃ­sticas Clave de la Arquitectura

### âœ… **Escalabilidad**
- Microservicios independientes
- BD por dominio (Database per service)
- R2DBC para concurrencia sin bloqueos
- Horizontal scaling sin punto Ãºnico de fallo

### âœ… **Observabilidad**
- Logs centralizados (ELK Stack)
- Tracing de requests entre servicios
- Health checks en Consul
- MÃ©tricas en Kibana

### âœ… **Resiliencia**
- Service discovery automÃ¡tico
- Health checks cada 10 segundos
- Retry logic en cliente HTTP
- Circuit breaker pattern (implementable)

### âœ… **Seguridad**
- OAuth2 + JWT tokens
- Spring Security 6
- ValidaciÃ³n en mÃºltiples capas
- CORS restrictivo

### âœ… **Testing**
- 352+ tests automatizados
- ~80% code coverage
- E2E con Cypress
- Integration tests con TestContainers

---

**Generado**: Diciembre 2025  
**VersiÃ³n de Arquitectura**: 1.0  
**Estado**: Production Ready âœ…
